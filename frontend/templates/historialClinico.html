<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Historial Cl칤nico</title>
    <!-- Asume que este archivo se enlaza con tu estilos.css principal y con el JS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/historial.css') }}">
    <!-- Usamos Font Awesome 5/6, ya que Lucide-React no est치 disponible en HTML puro -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- El CSS para este componente se a침adir치 al final del archivo -->
    <style id="historial-css"></style> 
</head>
<body>

    <!-- 游댐 Contenedor principal de la modal (simulaci칩n del Dialog) -->
    <!-- Quitamos la clase 'active' inicial para que se muestre al hacer click en el bot칩n, 
         pero la mantenemos para que se muestre al cargar la p치gina en el Canvas. -->
    <div id="medical-history-dialog" class="dialog-overlay active"> 
        <div class="dialog-content sm:max-w-[768px] max-h-[90vh]">
            
            <!-- Header (simulaci칩n de DialogHeader) -->
            <div class="dialog-header">
                <div>
                    <h1 class="main-title text-2xl">Historial Cl칤nico</h1>
                    <p class="subtitle text-sm text-muted-foreground">
                        Consulta tu informaci칩n m칠dica y recetas electr칩nicas
                    </p>
                </div>
                <button class="close-btn" onclick="closeDialog()">&times;</button>
            </div>

            <!-- Tabs (simulaci칩n de Tabs, TabsList, TabsTrigger) -->
            <div id="history-tabs" class="w-full mt-4">
                <div class="tabs-list grid grid-cols-2">
                    <button class="tab-trigger active" data-tab="personal">
                        <i class="fas fa-user icon"></i> Datos Personales
                    </button>
                    <button class="tab-trigger" data-tab="recetas">
                        <i class="fas fa-prescription-bottle-alt icon"></i> Recetas
                    </button>
                </div>

                <!-- TabsContent - Contenido Personal -->
                <div id="tab-content-personal" class="tab-content active mt-6">
                    <!-- Necesitamos aplicar el grid-cols-3 directamente al div -->
                    <div id="patient-data-grid" class="grid grid-cols-1 md:grid-cols-3 gap-4"> 
                        <!-- Las cards se inyectan aqu칤 con JavaScript -->
                    </div>
                </div>

                <!-- TabsContent - Contenido Recetas -->
                <div id="tab-content-recetas" class="tab-content hidden mt-6">
                    <!-- Ajuste para el scroll: overflow-y-auto en CSS en lugar de la clase scroll-area -->
                    <div class="scroll-area-container h-[400px]"> 
                        <div id="prescriptions-list" class="space-y-4 pr-4">
                            <!-- Las recetas se inyectan aqu칤 con JavaScript -->
                        </div>
                    </div>
                </div>

            </div>

        </div>
    </div>
    
    <!-- Bot칩n de prueba para abrir la modal (opcional, si no est치 enlazada) -->
    <!-- <button onclick="openDialog()">Abrir Historial Cl칤nico</button> -->

    <script>
        // La data mock se define aqu칤 para que JS la use
        const patientData = {
            weight: "70 kg",
            height: "1.75 m",
            bloodType: "O+",
            chronicDiseases: "Diabetes Tipo 2, Asma (alergias respiratorias)",
        };

        const prescriptions = [
            {
                id: "1",
                date: "15 de Febrero, 2025",
                doctorName: "Dr. Sarah Johnson",
                diagnosis: "Hipertensi칩n leve",
                medications: [
                    { name: "Losart치n", dosage: "50mg", frequency: "1 vez al d칤a", duration: "30 d칤as" },
                    { name: "Aspirina", dosage: "100mg", frequency: "1 vez al d칤a", duration: "30 d칤as" },
                ],
            },
            {
                id: "2",
                date: "3 de Enero, 2025",
                doctorName: "Dr. Michael Chen",
                diagnosis: "Infecci칩n respiratoria",
                medications: [
                    { name: "Amoxicilina", dosage: "500mg", frequency: "Cada 8 horas", duration: "7 d칤as" },
                    { name: "Ibuprofeno", dosage: "400mg", frequency: "Cada 6 horas", duration: "5 d칤as" },
                ],
            },
            {
                id: "3",
                date: "1 de Julio, 2024",
                doctorName: "Dra. Carolina R칤os",
                diagnosis: "Alergia Estacional",
                medications: [
                    { name: "Cetirizina", dosage: "10mg", frequency: "1 vez al d칤a", duration: "14 d칤as" },
                ],
            },
             {
                id: "4",
                date: "10 de Abril, 2024",
                doctorName: "Dr. Michael Chen",
                diagnosis: "Dolor de espalda",
                medications: [
                    { name: "Paracetamol", dosage: "500mg", frequency: "Cada 8 horas", duration: "3 d칤as" },
                ],
            },
        ];
    </script>
    <script src="{{ url_for('static', filename='js/historialClinico.js') }}"></script>
</body>
</html>

